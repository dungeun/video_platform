# 서버 배포용 환경 변수 템플릿
# 이 파일을 .env.production으로 복사하여 실제 값을 설정하세요

# ============================================
# 기본 설정
# ============================================
NODE_ENV=production
PORT=3000
NEXT_PUBLIC_BASE_URL=https://your-domain.com

# ============================================
# 데이터베이스 (PostgreSQL)
# ============================================
DATABASE_URL="postgresql://username:password@localhost:5432/video_platform?schema=public"
# 연결 풀 설정
DATABASE_CONNECTION_LIMIT=10
DATABASE_TIMEOUT=20000

# ============================================
# 인증 및 보안
# ============================================
# JWT 시크릿 (openssl rand -hex 32)
JWT_SECRET=your-jwt-secret-key-here
JWT_REFRESH_SECRET=your-jwt-refresh-secret-key-here

# NextAuth 설정
NEXTAUTH_URL=https://your-domain.com
NEXTAUTH_SECRET=your-nextauth-secret-key-here

# 암호화 키
ENCRYPTION_KEY=your-encryption-key-here

# ============================================
# 스토리지 (MinIO/S3)
# ============================================
# MinIO 또는 S3 설정
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=videopick

# S3 호환 설정 (프로덕션)
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=ap-northeast-2
S3_ACCESS_KEY_ID=your-s3-access-key
S3_SECRET_ACCESS_KEY=your-s3-secret-key
S3_BUCKET_NAME=your-bucket-name

# ============================================
# 스트리밍 서버
# ============================================
# MediaMTX (RTMP/HLS)
MEDIAMTX_API_URL=http://localhost:9997
MEDIAMTX_RTMP_URL=rtmp://localhost:1935
MEDIAMTX_HLS_URL=http://localhost:8888
MEDIAMTX_API_KEY=your-mediamtx-api-key

# 스트리밍 설정
STREAMING_ENABLED=true
STREAMING_MAX_BITRATE=6000000
STREAMING_KEY_LENGTH=32

# ============================================
# 실시간 통신 (Centrifugo)
# ============================================
CENTRIFUGO_URL=http://localhost:8000
CENTRIFUGO_API_KEY=your-centrifugo-api-key
CENTRIFUGO_SECRET=your-centrifugo-secret
CENTRIFUGO_WEBSOCKET_URL=ws://localhost:8000/connection/websocket

# ============================================
# 파일 업로드 (TUS)
# ============================================
TUS_UPLOAD_URL=http://localhost:1080/files/
TUS_CHUNK_SIZE=10485760
TUS_MAX_FILE_SIZE=5368709120

# ============================================
# Redis (캐싱 및 세션)
# ============================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_CACHE_TTL=3600

# ============================================
# 이메일 서비스
# ============================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@your-domain.com

# ============================================
# 외부 API
# ============================================
# YouTube API
YOUTUBE_API_KEY=your-youtube-api-key
YOUTUBE_CHANNEL_ID=your-channel-id

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# 결제 시스템
PAYMENT_GATEWAY=stripe
STRIPE_PUBLIC_KEY=pk_live_xxxxx
STRIPE_SECRET_KEY=sk_live_xxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# ============================================
# 모니터링 및 로깅
# ============================================
# Sentry
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# 로그 레벨
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=file
LOG_FILE_PATH=/var/log/video-platform/app.log

# ============================================
# 성능 최적화
# ============================================
# Next.js 설정
NEXT_SHARP_PATH=/usr/local/lib/node_modules/sharp
NEXT_TELEMETRY_DISABLED=1

# 이미지 최적화
IMAGE_OPTIMIZATION=true
IMAGE_QUALITY=85
IMAGE_DOMAINS=localhost,your-domain.com,s3.amazonaws.com

# ============================================
# 보안 설정
# ============================================
# CORS
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100

# CSP (Content Security Policy)
CSP_ENABLED=true
CSP_REPORT_URI=https://your-domain.com/api/csp-report

# ============================================
# 기능 플래그
# ============================================
FEATURE_LIVE_STREAMING=true
FEATURE_VIDEO_UPLOAD=true
FEATURE_COMMENTS=true
FEATURE_SUPER_CHAT=true
FEATURE_ANALYTICS=true
FEATURE_CAMPAIGNS=true

# ============================================
# 서버 전용 설정
# ============================================
# PM2 설정
PM2_INSTANCES=4
PM2_MAX_MEMORY_RESTART=1G

# 클러스터 모드
CLUSTER_MODE=true
WORKER_THREADS=4

# 백업 설정
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/video-platform

# ============================================
# 디버깅 (프로덕션에서는 false로 설정)
# ============================================
DEBUG_MODE=false
VERBOSE_LOGGING=false
SQL_LOGGING=false