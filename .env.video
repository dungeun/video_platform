# VideoPick Platform Environment Variables
# 동영상 플랫폼 전환을 위한 환경변수 설정

# ===== DATABASE CONFIGURATION =====
# New PostgreSQL for Video Platform
DATABASE_URL="postgres://postgres:47qdtodgTe996CTr16ESlNdywFcFFD5GdChiM7FrxEdaPr5ug5mGvwp9n9a5H6KX@i4sccwsosskookos4084ogkc:5432/postgres"
POSTGRES_URL="postgres://postgres:47qdtodgTe996CTr16ESlNdywFcFFD5GdChiM7FrxEdaPr5ug5mGvwp9n9a5H6KX@i4sccwsosskookos4084ogkc:5432/postgres"
POSTGRES_PRISMA_URL="postgres://postgres:47qdtodgTe996CTr16ESlNdywFcFFD5GdChiM7FrxEdaPr5ug5mGvwp9n9a5H6KX@i4sccwsosskookos4084ogkc:5432/postgres"
POSTGRES_URL_NON_POOLING="postgres://postgres:47qdtodgTe996CTr16ESlNdywFcFFD5GdChiM7FrxEdaPr5ug5mGvwp9n9a5H6KX@i4sccwsosskookos4084ogkc:5432/postgres"

# PostgreSQL credentials
POSTGRES_USER="postgres"
POSTGRES_PASSWORD="47qdtodgTe996CTr16ESlNdywFcFFD5GdChiM7FrxEdaPr5ug5mGvwp9n9a5H6KX"
POSTGRES_HOST="i4sccwsosskookos4084ogkc"
POSTGRES_DATABASE="postgres"

# Analytics Database (별도 구성 시)
ANALYTICS_DB_URL="postgres://postgres:47qdtodgTe996CTr16ESlNdywFcFFD5GdChiM7FrxEdaPr5ug5mGvwp9n9a5H6KX@i4sccwsosskookos4084ogkc:5432/videopick_analytics"

# ===== AUTHENTICATION =====
JWT_SECRET="VideoPick2024!SuperSecretJWTKey#VideoplatformProduction$"
JWT_REFRESH_SECRET="VideoPick2024!RefreshSecretKey#VideoplatformProductionRefresh$"

# ===== APPWRITE CONFIGURATION =====
NEXT_PUBLIC_APPWRITE_ENDPOINT="https://[your-appwrite-domain]/v1"
NEXT_PUBLIC_APPWRITE_PROJECT_ID="[your-project-id]"
APPWRITE_API_KEY="[your-api-key]"

# Appwrite Storage Buckets
APPWRITE_BUCKET_VIDEOS="videos"
APPWRITE_BUCKET_THUMBNAILS="thumbnails"
APPWRITE_BUCKET_AVATARS="avatars"
APPWRITE_BUCKET_BANNERS="banners"

# Appwrite Database
APPWRITE_DATABASE_ID="videopick"

# Appwrite Collections
APPWRITE_COLLECTION_CHANNELS="channels"
APPWRITE_COLLECTION_VIDEOS="videos"
APPWRITE_COLLECTION_COMMENTS="comments"
APPWRITE_COLLECTION_LIVE_CHATS="liveChats"
APPWRITE_COLLECTION_PLAYLISTS="playlists"

# ===== REDIS CONFIGURATION =====
# Redis는 동영상 플랫폼에서 캐싱, 실시간 기능에 필수
REDIS_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/0"
KV_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/0"
DISABLE_REDIS="false"

# Redis 용도별 DB 분리 (동일 호스트의 다른 DB 사용)
REDIS_CACHE_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/0"
REDIS_SESSION_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/1"
REDIS_QUEUE_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/2"
REDIS_ANALYTICS_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/3"
REDIS_PUBSUB_URL="redis://default:uu1SxljgYlrQpLlhIqXUn4GY1TNUuu81hk0IL0bDdT7WbuoDZ2JxUWITk9PVgQ2Q@bssgk8sogo8cgs4c4o0gkwkw:6379/4"

# ===== APPLICATION URLS =====
# 옵션 1: 새로운 서브도메인 사용 (권장)
NEXT_PUBLIC_API_URL="https://video.one-q.xyz"
NEXT_PUBLIC_APP_URL="https://video.one-q.xyz"
NEXT_PUBLIC_SOCKET_URL="wss://video.one-q.xyz"

# 옵션 2: 다른 포트 사용 (개발/테스트용)
# NEXT_PUBLIC_API_URL="https://coolify.one-q.xyz:3001"
# NEXT_PUBLIC_APP_URL="https://coolify.one-q.xyz:3001"

# 옵션 3: 경로 기반 라우팅 (같은 도메인 사용 시)
# NEXT_PUBLIC_API_URL="https://revu.one-q.xyz/video-api"
# NEXT_PUBLIC_APP_URL="https://revu.one-q.xyz/video"

NODE_ENV="production"
NEXT_TELEMETRY_DISABLED="1"

# ===== VIDEO STORAGE CONFIGURATION =====
# Storage Type: local, s3, gcs
VIDEO_STORAGE_TYPE="s3"

# AWS S3 Configuration
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
AWS_REGION="ap-northeast-2"

# S3 Buckets
S3_VIDEO_BUCKET="videopick-videos"
S3_THUMBNAIL_BUCKET="videopick-thumbnails"
S3_AVATAR_BUCKET="videopick-avatars"
S3_BANNER_BUCKET="videopick-banners"

# CDN Configuration
VIDEO_CDN_URL="https://cdn.videopick.one-q.xyz"
STATIC_CDN_URL="https://static.videopick.one-q.xyz"

# ===== VIDEO PROCESSING =====
# FFmpeg Configuration
FFMPEG_PATH="/usr/local/bin/ffmpeg"
FFPROBE_PATH="/usr/local/bin/ffprobe"

# Video Processing Settings
VIDEO_PROCESSING_ENABLED="true"
VIDEO_PROCESSING_QUEUE="video-processing"
MAX_CONCURRENT_JOBS="3"

# Encoding Settings
VIDEO_ENCODING_PROFILES="360p,480p,720p,1080p"
VIDEO_CODEC="h264"
AUDIO_CODEC="aac"
VIDEO_CONTAINER="mp4"

# Upload Limits
MAX_VIDEO_SIZE_MB="10240"  # 10GB
MAX_VIDEO_DURATION_SECONDS="43200"  # 12 hours
ALLOWED_VIDEO_FORMATS="mp4,avi,mov,mkv,webm,flv,wmv,mpeg"
ALLOWED_IMAGE_FORMATS="jpg,jpeg,png,gif,webp"

# Thumbnail Generation
THUMBNAIL_COUNT="3"
THUMBNAIL_WIDTH="1280"
THUMBNAIL_HEIGHT="720"
THUMBNAIL_FORMAT="jpg"

# ===== STREAMING CONFIGURATION =====
# Streaming Protocol
STREAMING_PROTOCOL="hls"  # hls or dash
HLS_SEGMENT_DURATION="6"
HLS_PLAYLIST_SIZE="10"
STREAMING_SERVER_URL="https://stream.videopick.one-q.xyz"

# Adaptive Bitrate Settings
ABR_ENABLED="true"
ABR_PROFILES="360p:800k,480p:1500k,720p:3000k,1080p:5000k"

# ===== LIVE STREAMING =====
LIVE_STREAMING_ENABLED="true"
RTMP_SERVER_URL="rtmp://live.videopick.one-q.xyz/live"
LIVE_STREAM_KEY_LENGTH="32"

# ===== SEARCH & DISCOVERY =====
# Elasticsearch Configuration
ELASTICSEARCH_URL="https://search.videopick.one-q.xyz"
ELASTICSEARCH_INDEX_PREFIX="videopick"
SEARCH_RESULTS_PER_PAGE="20"

# Recommendation Engine
RECOMMENDATION_SERVICE_URL="https://ml.videopick.one-q.xyz"
RECOMMENDATION_CACHE_TTL="1800"  # 30 minutes

# ===== MONETIZATION =====
# Revenue Sharing
AD_REVENUE_SHARE="0.7"  # 크리에이터 70%
MEMBERSHIP_PLATFORM_FEE="0.3"  # 플랫폼 30%
SUPER_CHAT_PLATFORM_FEE="0.3"
SUPER_THANKS_PLATFORM_FEE="0.3"

# Monetization Requirements
MIN_MONETIZATION_SUBSCRIBERS="1000"
MIN_MONETIZATION_WATCH_HOURS="4000"
MONETIZATION_REVIEW_PERIOD_DAYS="365"

# Payment Gateway (기존 Toss 유지)
TOSS_SECRET_KEY="test_sk_zXLkKEypNArWmo50nX3lmeaxYG5R"
NEXT_PUBLIC_TOSS_CLIENT_KEY="test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq"

# ===== ANALYTICS & METRICS =====
# Analytics Configuration
ANALYTICS_ENABLED="true"
ANALYTICS_BATCH_SIZE="100"
ANALYTICS_FLUSH_INTERVAL="60"  # seconds

# Metrics to Track
TRACK_VIEW_DURATION="true"
TRACK_ENGAGEMENT="true"
TRACK_DEMOGRAPHICS="true"
TRACK_TRAFFIC_SOURCE="true"

# ===== CONTENT MODERATION =====
# Moderation Service
CONTENT_MODERATION_ENABLED="true"
MODERATION_API_URL="https://moderate.videopick.one-q.xyz"
MODERATION_CONFIDENCE_THRESHOLD="0.8"

# Auto-moderation Rules
AUTO_FLAG_SPAM="true"
AUTO_FLAG_INAPPROPRIATE="true"
AUTO_FLAG_COPYRIGHT="true"

# ===== CACHING CONFIGURATION =====
# Cache TTL Settings (seconds)
VIDEO_METADATA_CACHE_TTL="3600"      # 1 hour
CHANNEL_DATA_CACHE_TTL="1800"        # 30 minutes
TRENDING_CACHE_TTL="300"             # 5 minutes
SEARCH_CACHE_TTL="600"               # 10 minutes
USER_PROFILE_CACHE_TTL="900"         # 15 minutes

# ===== FEATURE FLAGS =====
# Phase 1 Features
ENABLE_VIDEO_UPLOAD="false"
ENABLE_VIDEO_PLAYER="false"
SHOW_VIDEO_TAB="false"

# Phase 2 Features
ENABLE_CHANNELS="false"
ENABLE_SUBSCRIPTIONS="false"
ENABLE_COMMENTS="false"

# Phase 3 Features
ENABLE_LIVE_STREAMING="false"
ENABLE_STORIES="false"
ENABLE_COMMUNITY_POSTS="false"

# Phase 4 Features
ENABLE_MONETIZATION="false"
ENABLE_MEMBERSHIPS="false"
ENABLE_SUPER_CHAT="false"

# Migration Flags
ENABLE_LEGACY_ROUTES="true"
SHOW_MIGRATION_BANNER="false"
MIGRATION_MODE="prepare"  # prepare, active, complete

# ===== PERFORMANCE SETTINGS =====
# API Rate Limiting
API_RATE_LIMIT_WINDOW="60"  # seconds
API_RATE_LIMIT_MAX_REQUESTS="100"

# Database Connection Pool
DB_POOL_MIN="2"
DB_POOL_MAX="10"
DB_POOL_ACQUIRE_TIMEOUT="60000"
DB_POOL_IDLE_TIMEOUT="10000"

# Worker Configuration
WORKER_CONCURRENCY="4"
WORKER_MAX_JOBS_PER_WORKER="100"

# ===== LOGGING & MONITORING =====
# Log Level: error, warn, info, debug
LOG_LEVEL="info"
LOG_FORMAT="json"

# External Services
SENTRY_DSN=""
NEXT_PUBLIC_SENTRY_DSN=""
NEW_RELIC_LICENSE_KEY=""
DATADOG_API_KEY=""

# ===== EMAIL CONFIGURATION =====
# SMTP Settings (for notifications)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER=""
SMTP_PASS=""
SMTP_FROM="VideoPick <noreply@videopick.one-q.xyz>"

# ===== BACKUP & RECOVERY =====
# Backup Configuration
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 3 * * *"  # 3 AM daily
BACKUP_RETENTION_DAYS="30"
BACKUP_S3_BUCKET="videopick-backups"

# ===== DEVELOPMENT & DEBUG =====
# Debug Settings
DEBUG_MODE="false"
VERBOSE_LOGGING="false"
SHOW_SQL_QUERIES="false"

# Test Mode
TEST_MODE="false"
MOCK_EXTERNAL_SERVICES="false"